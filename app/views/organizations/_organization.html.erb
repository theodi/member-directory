<div class='organization'>

  <h2<% if @preview %> data-bind="text: name"<% end %>><%= organization.name %></h2>

  <i class='icon icon-home'></i> <a<% if @preview %> data-bind="text: url, attr: {href: url}"<% end %> href='<%= organization.url %>'><%= organization.url%></a>

  <div class='organization-description'>
    <% if @preview %>
      <p data-bind="text: description"></p>
    <% else %>
      <%= simple_format(organization.description) %>
    <% end %>
  </div>

  <% if @preview %>
    <script type="text/javascript">
        function OrganisationViewModel() {
            this.name        = ko.observable("<%= organization.name %>");
            this.description = ko.observable("<%= organization.description %>");
            this.url         = ko.observable("<%= organization.url %>");
        };
        ko.applyBindings(new OrganisationViewModel());
    </script>
  <% end %>
  
</div>